{% extends "base.html" %}
{% block body_class %}post-page{% endblock %}
{% block content %}
{% if page.extra.banner_iframe %}
<h1 class="title title-iframe">
    <span class="sr-only">{{ page.title }}</span>
    <div class="post-banner-frame">
        <iframe
            class="post-banner-iframe"
            src="{{ page.extra.banner_iframe | safe }}"
            title="{{ page.title }}"
            loading="eager"
            fetchpriority="high"
        ></iframe>
    </div>
</h1>
{% elif page.extra.use_image_as_title %}
<h1 class="title title-image">
    <img
        src="{{ page.extra.use_image_as_title | safe }}"
        alt="{{ page.title }}"
        loading="eager"
        decoding="async"
    />
</h1>
{% else %}
<h1 class="title">{{ page.title }}</h1>
{% endif %}
{% if not page.extra.banner_iframe %}
<p class="subtitle">
    <span class="date">{{ page.date }}</span>
    <span class="readtime">{{ page.reading_time }} minute read</span>
</p>
{% endif %}

{% if page.extra.feature_image and not page.extra.banner_iframe %}
<figure class="feature-image">
    <img
        src="{{ page.extra.feature_image | safe }}"
        alt="{{ page.title }} feature image"
        loading="lazy"
        decoding="async"
    />
</figure>
{% endif %}

{% set post_year = page.date | date(format="%Y") | int %}
{% if post_year < 2023 %}
<div class="old-post-warning">
    <p><strong>Old post.</strong> Hi! Thanks for reading this older post. I wrote it back in high school, so you may run into broken links or out-of-date information.</p>
    <p>If you have any questions, just <a href="mailto:hi@srg.id.au">email me</a> and I'm happy to answer.</p>
</div>
{% endif %}

{% if page.taxonomies.tags %}
<div class="tags">
    {% for tag in page.taxonomies.tags %}
    <a href="/tags/{{ tag | slugify | safe }}" class="tag"
        >#{{ tag | slugify }}</a
    >
    {% endfor %}
</div>
{% endif %} {% if page.toc %}
<div class="toc">
    <h4>Table of contents</h4>

    <ul>
        {% for h1 in page.toc %}
        <li>
            <a href="{{ h1.permalink | safe }}">{{ h1.title }}</a>
            {% if h1.children %}
            <ul>
                {% for h2 in h1.children %}
                <li>
                    <a href="{{ h2.permalink | safe }}">{{ h2.title }}</a>

                    {% if h2.children %}
                    <ul>
                        {% for h3 in h2.children %}
                        <li>
                            <a href="{{ h3.permalink | safe }}"
                                >{{ h3.title }}</a
                            >
                        </li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<div class="post-layout">
    <aside class="footnote-rail left" aria-hidden="true"></aside>
    <article class="post-article">
        {{ page.content | safe }}
    </article>
    <aside class="footnote-rail right" aria-hidden="true"></aside>
</div>

{% set signup_variant = "post-bottom" %}
{% include "partials/newsletter-signup.html" %}

<div class="footnote-modal" id="footnote-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <button class="footnote-modal-backdrop" type="button" data-footnote-close aria-label="Close footnote"></button>
    <div class="footnote-modal-sheet" role="document">
        <div class="footnote-modal-grab" aria-hidden="true"></div>
        <div class="footnote-modal-header">
            <span class="footnote-modal-title">Footnote <span data-footnote-number></span></span>
            <button class="footnote-modal-close" type="button" data-footnote-close aria-label="Close footnote">Ã—</button>
        </div>
        <div class="footnote-modal-body" data-footnote-content></div>
    </div>
</div>

{% if not page.extra.disable_comments %}
<script
    src="https://utteranc.es/client.js"
    repo="shaunakg/portfolio-zola"
    issue-term="og:title"
    label="comments"
    theme="github-light"
    crossorigin="anonymous"
    async
></script>
{% endif %}

<script src="{{ get_url(path="footnotes.js", trailing_slash=false) }}"></script>

<a style="font-size: 0.8em" href="#" onclick="history.back()">&lt;- Back</a>

{% endblock content %}
