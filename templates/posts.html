{% extends "base.html" %}

{% block content %}

<h1 class="title">
  {{ section.title }}
</h1>

<p>
    My goal is to post every two days. Here you can see how well I'm keeping up.
</p>

<p>
  You can also subscribe via <a href="/atom.xml">RSS</a>.
</p>

<div class="post-list">
  {% set_global last_year = "" %}
  {% for page in section.pages %}
    {% set year = page.date | date(format="%Y") %}
    {% if year != last_year %}
      {% if last_year != "" %}</div>{% endif %}
      <h3 class="year-header">{{ year }}</h3>
      <div class="year-group">
      {% set_global last_year = year %}
    {% endif %}

    <div class="post-item" data-date="{{ page.date | date(format="%Y-%m-%d") }}">
      <div class="post-header">
        <a class="post-title" href="{% if page.extra.external_link %}{{ page.extra.external_link | safe }}{% else %}{{ page.permalink | safe }}{% endif %}">
          {{ page.title }}
        </a>
      </div>

      {% if page.description %}
        <div class="post-description">
          <span class="post-date">{{ page.date | date(format="%b %d") }}</span> — {{ page.description }}
        </div>
      {% elif page.summary %}
        <div class="post-description">
          <span class="post-date">{{ page.date | date(format="%b %d") }}</span> — {{ page.summary | striptags | truncate(length=200) }}
        </div>
      {% endif %}
    </div>
  {% endfor %}
  {% if last_year != "" %}</div>{% endif %}
</div>

<a class="back" href="#" onclick="history.back()">&lt;- Back</a>
{% endblock content %}
