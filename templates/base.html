<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="apple-touch-icon" sizes="180x180" href="{{ get_url(path="apple-touch-icon.png", trailing_slash=false) }}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ get_url(path="favicon-32x32.png", trailing_slash=false) }}">
        <link rel="icon" type="image/png" sizes="16x16" href="{{ get_url(path="favicon-16x16.png", trailing_slash=false) }}">
        <link rel="manifest" href="{{ get_url(path="site.webmanifest", trailing_slash=false) }}">

        <link rel="alternate" type="application/atom+xml" title="RSS" href="{{ get_url(path="atom.xml", trailing_slash=false) }}">
        {% set canonical_url = config.base_url %}
        {% if page is defined and page.permalink %}
            {% set canonical_url = page.permalink %}
        {% elif section is defined and section.permalink %}
            {% set canonical_url = section.permalink %}
        {% elif term is defined and term.permalink %}
            {% set canonical_url = term.permalink %}
        {% elif current_path is defined and current_path != "" %}
            {% set canonical_url = get_url(path=current_path, trailing_slash=true) %}
        {% endif %}
        <link rel="canonical" href="{{ canonical_url | safe }}" />
        <meta property="og:locale" content="en_AU" />
        <meta property="og:url" content="{{ canonical_url | safe }}" />
        {% if page is defined %}
            <meta property="og:type" content="article" />
            {% if page.date %}
                <meta property="article:published_time" content="{{ page.date }}" />
            {% endif %}
        {% else %}
            <meta property="og:type" content="website" />
        {% endif %}

        <meta property="og:site_name" content="{{ config.extra.site_title }}" />

        {% if page.title %}
            <title>{{page.title}} | {{config.extra.site_title}}</title>
            <meta property="og:title" content="{{page.title}}" />
            <meta name="twitter:title" content="{{ page.title }}">
        {% elif section.title %}
            <title>{{section.title}} | {{config.extra.site_title}}</title>
            <meta property="og:title" content="{{section.title}}" />
            <meta name="twitter:title" content="{{ section.title }}">
        {% else %}
            <title>{{config.extra.site_title}}</title>
            <meta property="og:title" content="{{config.extra.site_title}}" />
            <meta name="twitter:title" content="{{config.extra.site_title}}">
        {% endif %}

        {% set desc=config.extra.site_description %}
        {% if page.description %}
            {% set desc=page.description %}
        {% elif section.description %}
            {% set desc=section.description %}
        {% endif %}

        <meta name="description" content="{{ desc }}" />
        <meta property="og:description" content="{{ desc }}" />
        <meta name="twitter:description" content="{{ desc }}" />
        <meta name="twitter:url" content="{{ canonical_url | safe }}" />

        {% set og_image_url = get_url(path="og.png", trailing_slash=false) %}
        {% if page.extra.og_image %}
            {% set og_image_url = page.extra.og_image %}
        {% elif page.title %}
            {% set og_title_enc = page.title | urlencode %}
            {% set og_url = "https://og.srg.id.au/api/og?title=" ~ og_title_enc %}
            {% if page.description %}
                {% set og_desc_enc = page.description | urlencode %}
                {% set og_url = og_url ~ "&description=" ~ og_desc_enc %}
            {% endif %}
            {% if page.date %}
                {% set og_date_enc = page.date | urlencode %}
                {% set og_url = og_url ~ "&date=" ~ og_date_enc %}
            {% endif %}
            {% if page.extra.feature_image %}
                {% set og_bg_enc = page.extra.feature_image | urlencode %}
                {% set og_url = og_url ~ "&bg=" ~ og_bg_enc %}
            {% endif %}
            {% set og_image_url = og_url %}
        {% endif %}
        {% set twitter_image_alt = config.extra.site_title %}
        {% if page.title %}
            {% set twitter_image_alt = page.title %}
        {% elif section.title %}
            {% set twitter_image_alt = section.title %}
        {% endif %}
        <meta property="og:image" content="{{ og_image_url | safe }}" />
        <meta property="og:image:secure_url" content="{{ og_image_url | safe }}" />
        <meta name="twitter:image" content="{{ og_image_url | safe }}" />
        <meta name="twitter:image:alt" content="{{ twitter_image_alt }}" />

        <link rel="stylesheet" href="{{ get_url(path="style.css", trailing_slash=false) }}" />

        <link rel="webmention" href="https://webmention.io/srg.id.au/webmention" />
        <link rel="pingback" href="https://webmention.io/srg.id.au/xmlrpc" />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@2vectorfoil" />
        <meta name="twitter:creator" content="@2vectorfoil" />

        <!-- Analytics code -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-P80KQB5DMX"></script>
        <script>

            // Google Analytics
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-P80KQB5DMX');

        </script>
        <!-- end analytics code -->

    </head>
    <body class="{% block body_class %}{% endblock %}">
        <div class="main">
            <div class="links" id="main-header">
                <div class="nav-group left path-nav">
                    <a href="{{ get_url(path="") }}"><b>~/srg</b></a>
                    {%- if current_path -%}
                        {%- if current_path == "/" -%}
                            <span>/</span>
                        {%- else -%}
                            {%- set path_parts = current_path | split(pat="/") -%}
                            {%- set_global built_path = "" -%}
                            {%- for part in path_parts -%}
                                {%- if part != "" -%}
                                    {%- set_global built_path = built_path ~ "/" ~ part -%}
                                    <span>/</span><a href="{{ built_path }}">{{ part }}</a>
                                {%- endif -%}
                            {%- endfor -%}
                            <span>/</span>
                        {%- endif -%}
                    {%- else -%}
                        <span>/</span>
                    {%- endif -%}
                </div>
                <div class="nav-group right">
                    <a href="{{ get_url(path="@/posts/_index.md") }}">posts</a>
                    <a rel="me authn" href="https://github.com/shaunakg" target="_blank">github</a>
                    <a rel="me" href="mailto:hi@srg.id.au" target="_blank">email</a>
                    <a rel="me" style="display:none" href="https://social.srg.id.au/@sg" target="_blank">mastodon</a>
                    <a href="https://x.com/2vectorfoil">ùïè</a>
                </div>
            </div>

            {% block content %} {% endblock %}
        </div>

         <!--<div class="overlay" id="canvas-overlay">
            <canvas id="canvas" width="500" height="500"></canvas>
        </div>

        <div class="overlay" id="cursors-overlay"></div>

        <script src="/main.js"></script>-->

        <footer class="page-footer" id="main-footer" style="--footer-gradient-height: 50%;">
            <img
                class="page-footer-image"
                src="{{ get_url(path="images/ormond.jpeg", trailing_slash=false) }}"
                alt="Point Ormond, St Kilda, Victoria"
                loading="lazy"
                decoding="async"
            >
            <div class="page-footer-pill">
                ¬© {{ now() | date(format="%Y") }} Shaunak Gadkari (srg) ¬∑ <a rel="pgpkey" href="/pgp.txt">pgp public key</a>
            </div>
        </footer>

        <!-- Gallery lightbox script -->
        <script src="{{ get_url(path="gallery.js", trailing_slash=false) }}"></script>
        <!-- Carousel script -->
        <script src="{{ get_url(path="carousel.js", trailing_slash=false) }}"></script>
        <!-- Newsletter subscription script -->
        <script src="{{ get_url(path="subscription.js", trailing_slash=false) }}"></script>

    </body>
</html>
